    <!-- Only keep the unified project container version below -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Pitch Sequences — Christopher Hsu</title>
    <link href="../styles.css" rel="stylesheet">
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <div class="brand">
          <a href="/" class="site-title">Christopher Hsu</a>
          <p class="tagline">Data Science &amp; Sabermetrics</p>
        </div>
        <nav aria-label="Main navigation">
          <ul class="nav-list">
            <li><a href="/">Home</a></li>
            <li><a href="/about.html">About</a></li>
          </ul>
        </nav>
      </div>
    </header>

  <main class="section page-inner" style="max-width:1400px; margin:32px auto 0 auto; background:#16161a; border-radius:18px; box-shadow:0 4px 32px 0 rgba(0,0,0,0.12);">
    <div class="project-container">
      <div style="margin-top:20px; display:flex; gap:12px; align-items:center;">
        <a class="launch-big" href="https://pitchsequence.streamlit.app/" target="_blank" rel="noopener noreferrer">Launch (Live)</a>
        <a class="btn ghost" href="https://github.com/christopherhsuu/pitchsequence/tree/main" target="_blank" rel="noopener noreferrer">Code</a>
      </div>
      <h1>Pitch Sequences</h1>
      <p class="muted" style="font-size:1.1rem; margin:12px 0 32px 0;">A machine learning system that recommends optimal pitch sequences based on run-value prediction and batter matchup data.</p>

      <section class="prose max-w-4xl text-gray-200 mt-8 space-y-6">
        <h2 class="font-bold text-2xl mt-4 mb-3" style="color:#eebbc3;">Project Overview</h2>

        <p style="line-height:1.7; margin-bottom:20px;">
          This system predicts the run-value impact of each pitch choice and recommends sequences that minimize expected runs for the pitcher. It combines Statcast pitch tracking data, batter performance metrics, and situational context to make intelligent recommendations.
        </p>
        <p style="line-height:1.7; margin-bottom:20px;">
          The model considers count, base state, batter tendencies, and pitcher arsenal to generate ranked pitch recommendations. An interactive Streamlit interface simulates at-bats pitch-by-pitch, updating recommendations as the count evolves.
        </p>

        <div style="background:rgba(255,255,255,0.03); padding:20px; border-radius:12px; margin:24px 0;">
          <h3 style="margin:0 0 12px 0; color:#eebbc3; font-size:1.1rem;">Key Technologies</h3>
          <p style="margin:0; line-height:1.7;"><strong>Python</strong> • Statcast API • RandomForest/GradientBoosting • Run expectancy modeling • Streamlit • pandas • scikit-learn</p>
        </div>

        <h2 class="font-bold text-2xl mt-12 mb-3" style="color:#eebbc3;">Development Process</h2>

        <div class="process-step" style="margin:32px 0;">
          <h3 class="font-bold text-xl mb-3" style="color:#fff;">Step 1: Data Collection & Preprocessing</h3>
          <p style="line-height:1.7; margin-bottom:16px;">
            Raw Statcast pitch-by-pitch data is extracted from Baseball Savant and cleaned to create consistent, model-ready datasets. Each pitch includes tracking data, situational context, and outcome information.
          </p>
          <div style="background:rgba(255,255,255,0.02); padding:16px; border-left:3px solid #eebbc3; margin:16px 0;">
            <p style="margin:0 0 8px 0; font-weight:600;">Preprocessing steps:</p>
            <ul style="margin:0; padding-left:20px; line-height:1.8;">
              <li>Normalize pitch type labels (FF, SL, CH, CU, etc.)</li>
              <li>Clean inconsistent or missing values</li>
              <li>Map pitch locations to plate coordinates</li>
              <li>Filter out low-sample players to reduce noise</li>
              <li>Extract recent seasons only to avoid historical drift</li>
            </ul>
          </div>
        </div>

        <div class="process-step" style="margin:32px 0;">
          <h3 class="font-bold text-xl mb-3" style="color:#fff;">Step 2: Feature Engineering</h3>
          <p style="line-height:1.7; margin-bottom:16px;">
            Features combine situational context, pitch characteristics, and batter matchup data. The goal is to capture everything that influences run expectancy after a pitch.
          </p>
          <div style="background:rgba(255,255,255,0.02); padding:16px; border-left:3px solid #eebbc3; margin:16px 0;">
            <p style="margin:0 0 8px 0; font-weight:600;">Feature categories:</p>
            <ul style="margin:0; padding-left:20px; line-height:1.8;">
              <li><strong>Situational:</strong> count (balls/strikes), outs, base runners</li>
              <li><strong>Pitch tracking:</strong> pitch type, velocity, spin rate, location</li>
              <li><strong>Sequence context:</strong> last pitch type, result, speed delta</li>
              <li><strong>Batter matchups:</strong> wOBA, whiff rate, and run value vs. each pitch type</li>
            </ul>
          </div>
          <p style="line-height:1.7; margin-top:16px;">
            Batter-specific aggregates capture how well each batter performs against different pitch types. This allows the model to recommend pitches that exploit weaknesses in the batter's approach.
          </p>
        </div>

        <div class="process-step" style="margin:32px 0;">
          <h3 class="font-bold text-xl mb-3" style="color:#fff;">Step 3: Run-Value Model Training</h3>
          <p style="line-height:1.7; margin-bottom:16px;">
            A regression model predicts the change in run expectancy for each pitch. The model learns from historical pitch outcomes to estimate how many runs a pitch is likely to add or prevent.
          </p>
          <div style="background:rgba(255,255,255,0.02); padding:16px; border-left:3px solid #eebbc3; margin:16px 0;">
            <p style="margin:0 0 8px 0; font-weight:600;">Training pipeline:</p>
            <ol style="margin:0; padding-left:20px; line-height:1.8;">
              <li>Time-based train/validation/test split to prevent leakage</li>
              <li>Encode categorical features and scale numeric inputs</li>
              <li>Train RandomForest or GradientBoosting regressors</li>
              <li>Optimize hyperparameters via grid search</li>
              <li>Evaluate using MSE, MAE, and explained variance</li>
              <li>Serialize final model for deployment</li>
            </ol>
          </div>
          <p style="line-height:1.7; margin-top:16px;">
            The trained model outputs a run-value prediction for each candidate pitch. Lower predictions indicate pitches that are more likely to benefit the pitcher.
          </p>
        </div>

        <div class="process-step" style="margin:32px 0;">
          <h3 class="font-bold text-xl mb-3" style="color:#fff;">Step 4: Interactive Deployment</h3>
          <p style="line-height:1.7; margin-bottom:16px;">
            The trained model is deployed in a Streamlit app that simulates at-bats pitch by pitch. Users select a pitcher and batter, then step through each pitch decision.
          </p>
          <div style="background:rgba(255,255,255,0.02); padding:16px; border-left:3px solid #eebbc3; margin:16px 0;">
            <p style="margin:0 0 8px 0; font-weight:600;">How the app works:</p>
            <ol style="margin:0; padding-left:20px; line-height:1.8;">
              <li>Load trained run-value model</li>
              <li>Input pitcher and batter names</li>
              <li>For each count and base state, generate candidate pitches</li>
              <li>Predict run-value for each candidate pitch</li>
              <li>Rank pitches by lowest expected run value</li>
              <li>Display recommendations with probabilities and strike zone visualization</li>
              <li>Update count/base state after each pitch and recompute</li>
            </ol>
          </div>
          <p style="line-height:1.7; margin-top:16px;">
            This creates a realistic pitch sequencing simulation where recommendations adapt as the at-bat evolves.
          </p>
        </div>

        <h2 class="font-bold text-2xl mt-12 mb-3" style="color:#eebbc3;">Technical Highlights</h2>
        <div style="background:rgba(255,255,255,0.02); padding:20px; border-radius:12px; margin:20px 0;">
          <ul style="margin:0; padding-left:20px; line-height:1.8;">
            <li>Time-based train/validation split prevents data leakage from future information</li>
            <li>Batter-specific matchup statistics personalize recommendations</li>
            <li>Run expectancy framework provides interpretable, strategically-grounded predictions</li>
            <li>Softmax conversion of run-values creates intuitive probability rankings</li>
            <li>Modular pipeline supports easy retraining and model updates</li>
          </ul>
        </div>
      </section>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p class="muted">© 2025 Christopher Hsu</p>
    </div>
  </footer>
  </body>
</html>