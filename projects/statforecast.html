<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>StatForecast — Christopher Hsu</title>
  <link href="../styles.css" rel="stylesheet">
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <div class="brand">
          <a href="/" class="site-title">Christopher Hsu</a>
          <p class="tagline">Data Science &amp; Sabermetrics</p>
        </div>
        <nav aria-label="Main navigation">
          <ul class="nav-list">
            <li><a href="/">Home</a></li>
            <li><a href="/index.html#projects">Projects</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="container section">
      <h1>StatForecast</h1>
      <p class="muted">A forecasting tool that uses historical sabermetrics and machine learning to estimate future player performance. This page links to the live app and the code repository.</p>

      <div style="margin-top:20px; display:flex; gap:12px;">
        <a class="launch-big" href="https://statforecast.streamlit.app" target="_blank" rel="noopener noreferrer">Launch (Live)</a>
        <a class="btn ghost" href="https://github.com/christopherhsuu/statforecast" target="_blank" rel="noopener noreferrer">Code</a>
      </div>

git clone https://github.com/christopherhsuu/statforecast
      <section style="margin-top:28px;">
        <h2>About StatForecast</h2>
        <p class="muted">StatForecast was built to answer a practical question: given a hitter's recent seasons, what is a realistic, data-driven projection of their next-season offensive performance? The project focuses on trajectory-aware features — lagged seasons, rolling averages, and year-over-year deltas — to capture momentum and reversion effects that a single-season baseline often misses. By predicting multiple offensive metrics at once, the model preserves relationships across targets (for example, how changes in walk rate and contact quality jointly influence OPS).</p>

        <p class="muted">I started by collecting a season-by-season hitters table (a Fangraphs-style CSV). The data pipeline normalizes common column names, converts percent strings into numeric values, filters for players with sufficient plate appearances, and sorts by player and season. Feature engineering is the core of the work: for each stat I create lag1/lag2/lag3 features, three-season rolling means, deltas (this year vs last), average-delta smoothing, longer-term career changes, and age interaction terms that let the model treat improving young players differently from aging veterans. Missing engineered values are handled cleanly — training rows missing required features are dropped, while prediction-time rows are reindexed to the saved feature list and filled with zeros as needed.</p>

        <p class="muted">For modeling I assemble X/Y matrices and train a multi-output Random Forest (scikit-learn). The model uses a forest per target within a multi-output wrapper so all offensive metrics are predicted in one pass. I use a holdout split and report RMSE as the primary evaluation metric; the training code also saves metadata (feature column order, RMSE, and training/test sizes) so predictions are reproducible and stable. Saving feature column order is a small but important detail: prediction-time code reindexes input rows to the original column order so the model sees features in the same layout used during training.</p>

        <p class="muted">The Streamlit app provides a practical interface: load or upload a hitters CSV, ensure a model is available (load locally, download via MODEL_URL, or retrain in-app), search for a player, and view historical charts alongside the next-season forecast. Deployment choices focus on usability and reproducibility — large model artifacts are supported via runtime download or Git LFS to avoid shipping binaries in the repo.</p>

        <p class="muted">Key challenges included stabilizing noisy year-to-year stat fluctuations and handling edge cases like rookies and players returning from injury. Trajectory features and rolling aggregates reduce variance from single-season noise, while age interactions encode domain knowledge about how improvement or decline varies with age. For uncertainty, the current heuristic uses tree-ensemble variance; future work includes quantile forests or conformal prediction for principled intervals.</p>

        <p class="muted">StatForecast is a practical baseline for analysts and fantasy managers who want explainable projections and transparent methodology. Future improvements include full cross-validation and hyperparameter tuning, richer Statcast-derived inputs (barrel%, exit velocity), better rookie/injury handling, and more rigorous uncertainty quantification. The app already lets users export results and inspect feature importance, making it a useful starting point for roster analysis or research.</p>
      </section>

      <section style="margin-top:18px;">
        <h2>Reproducibility</h2>
        <pre style="background:rgba(255,255,255,0.02); padding:12px; border-radius:8px; color:var(--muted-text);">
# clone the repository
git clone https://github.com/christopherhsuu/statforecast
cd statforecast
# create and activate a virtualenv, then install
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
# run the Streamlit app
streamlit run app.py
        </pre>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container">
        <p class="muted">© 2025 Christopher Hsu</p>
      </div>
    </footer>
  </body>
</html>
