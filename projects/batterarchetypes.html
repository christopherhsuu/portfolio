    <!-- Only keep the unified project container version below -->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Batter Archetypes — Christopher Hsu</title>
    <link href="../styles.css" rel="stylesheet">
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <div class="brand">
          <a href="/" class="site-title">Christopher Hsu</a>
          <p class="tagline">Data Science &amp; Sabermetrics</p>
        </div>
        <nav aria-label="Main navigation">
          <ul class="nav-list">
            <li><a href="/">Home</a></li>
            <li><a href="/about.html">About</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="section page-inner" style="max-width:1400px; margin:32px auto 0 auto; background:#16161a; border-radius:18px; box-shadow:0 4px 32px 0 rgba(0,0,0,0.12);">
    <div class="project-container">
      <div style="margin-top:20px; display:flex; gap:12px; align-items:center;">
        <a class="launch-big" href="https://hitterarchetypes.streamlit.app" target="_blank" rel="noopener noreferrer">Launch (Live)</a>
        <a class="btn ghost" href="https://github.com/christopherhsuu/hitterarchetypes" target="_blank" rel="noopener noreferrer">Code</a>
      </div>
      <h1>Batter Archetypes</h1>
      <p class="muted">An exploratory clustering of hitters to identify archetypes (power/speed/contact/etc.) and visualize archetype profiles.</p>
      <section class="prose max-w-4xl text-gray-200 mt-8 space-y-6">
        <h2 class="font-bold text-2xl mt-8 mb-2">Methodology &amp; Execution</h2>
        <hr class="my-4 border-gray-700">

        <h3 class="font-bold text-xl mt-6 mb-2">Overview</h3>
    <p style="line-height:1.25em;">
      <strong>Hitter Archetypes</strong> is a sabermetric clustering pipeline and interactive <strong>Streamlit</strong> app built to identify and visualize MLB hitter types from aggregated <strong>Statcast</strong> and swing-tracking data.
    </p>
    <p style="line-height:1.25em;">
      The project combines swing mechanics, contact quality, and bat-tracking features to group hitters into meaningful, data-driven archetypes—like <em>High-Launch Sluggers</em> or <em>Compact-Contact Hitters</em>. Using <strong>PCA</strong> (Principal Component Analysis) for dimensionality reduction and <strong>K-Means</strong> for clustering, the model uncovers patterns of how hitters generate results rather than just what outcomes they produce. The Streamlit interface lets users explore each archetype interactively, viewing cluster centroids, representative players, and feature diagnostics.
    </p>

    <h3 class="font-bold text-xl mt-6 mb-2">1. Data Preparation</h3>
    <p style="line-height:1.25em;">All preprocessing occurs through the <code>scripts/</code> directory, with exploratory notebooks in <code>notebooks/</code>.</p>
    <h4 class="font-semibold text-lg mt-4 mb-2">Data Sources</h4>
    <ul class="list-disc ml-6 space-y-1">
      <li>Raw Statcast pitch- and swing-level CSVs stored in <code>data/raw/</code>.</li>
      <li>Name-mapping files linking numeric player IDs to display names.</li>
    </ul>
    <h4 class="font-semibold text-lg mt-4 mb-2">Workflow</h4>
    <ol class="list-decimal ml-6 space-y-1">
      <li><strong>Extraction:</strong> Data is pulled from Statcast using custom Python queries (<code>notebooks/get_savant_data.ipynb</code>).</li>
      <li><strong>Aggregation:</strong> Compute per-player averages and percentiles for:
        <ul class="list-disc ml-6 space-y-1">
          <li><code>launch_speed_mean</code>, <code>launch_angle_mean</code></li>
          <li><code>bat_speed_mean</code>, <code>pct_hard_hit</code></li>
          <li><code>swing_length_mean</code>, <code>attack_angle_mean</code></li>
          <li><code>intercept_ball_minus_batter_pos_x_inches_mean</code>, <code>n_swings</code></li>
        </ul>
        Each aggregation includes mean, standard deviation, median, and 95th percentile values to describe both consistency and top-end performance.
      </li>
      <li><strong>Missing values & outliers:</strong> Missing counts are filled with 0 or dropped when necessary. Numeric columns are winsorized at the 1st and 99th percentiles to reduce the effect of extreme values.</li>
      <li><strong>Circular features:</strong> Angles such as <code>attack_direction_mean</code> are split into sine and cosine components to prevent discontinuities (e.g., 0° ≈ 360°).</li>
      <li><strong>Name enrichment:</strong> <code>data/raw/unique_batters_with_names.csv</code> maps player IDs to readable names; numeric IDs are used when names are unavailable.</li>
      <li><strong>Export:</strong> Final aggregated data is saved to <code>data/player_archetypes.csv</code>, with cluster-specific summaries in <code>data/clusters/</code>.</li>
    </ol>

    <hr class="my-4 border-gray-700">

    <h3 class="font-bold text-xl mt-6 mb-2">2. Feature Engineering</h3>
    <p style="line-height:1.25em;">
      The clustering uses a combination of mechanical, geometric, and contextual variables that describe how a player swings the bat, how consistently they make contact, and what kinds of batted-ball outcomes they generate.
    </p>
    <h4 class="font-semibold text-lg mt-4 mb-2">Feature Set</h4>
    <ul class="list-disc ml-6 space-y-1">
      <li><code>whiff_rate</code>, <code>contact_rate</code></li>
      <li><code>launch_speed_mean</code>, <code>launch_speed_std</code>, <code>launch_speed_median</code>, <code>launch_speed_p95</code></li>
      <li><code>launch_angle_mean</code>, <code>launch_angle_std</code>, <code>gb_pct</code>, <code>ld_pct</code>, <code>fb_pct</code></li>
      <li><code>bat_speed_mean</code>, <code>bat_speed_std</code></li>
      <li><code>pct_hard_hit</code> (rate of hard-hit balls above threshold)</li>
      <li><code>swing_length_mean</code>, <code>attack_angle_mean</code>, <code>swing_path_tilt_mean</code></li>
      <li><code>intercept_ball_minus_batter_pos_x_inches_mean</code>, <code>intercept_ball_minus_batter_pos_y_inches_mean</code></li>
      <li><code>attack_direction_mean</code> (converted to sine and cosine)</li>
    </ul>

    <h4 class="font-semibold text-lg mt-4 mb-2">Feature Transformations</h4>
    <ul class="list-disc ml-6 space-y-1">
      <li>Decompose all angular variables into <code>_sin</code> and <code>_cos</code> pairs.</li>
      <li>Apply <code>log1p</code> to skewed count variables like <code>n_swings</code>.</li>
      <li>Winsorize numeric features at the 1st and 99th percentiles.</li>
      <li>Normalize using <code>RobustScaler</code> to dampen the effect of outliers.</li>
    </ul>
    <p style="line-height:1.25em;">
      These transformations align the features onto comparable scales so that no single metric dominates. Circular encoding ensures smooth handling of angular data, while scaling and winsorization prevent extreme values from distorting cluster boundaries.
    </p>

    <hr class="my-4 border-gray-700">

    <h3 class="font-bold text-xl mt-6 mb-2">3. Clustering Pipeline</h3>
    <p style="line-height:1.25em;">The clustering process, implemented in <code>scripts/cluster_archetypes.py</code>, groups players with similar swing and contact patterns.</p>

    <h4 class="font-semibold text-lg mt-4 mb-2">Step-by-Step</h4>
    <ol class="list-decimal ml-6 space-y-1">
      <li>Select the cleaned and transformed numeric feature set.</li>
      <li>Run <strong>PCA</strong> to reduce dimensions and reveal overall structure (typically 2 components).</li>
      <li>Use <strong>K-Means</strong> clustering to identify player groups.</li>
      <li>Save assignments to <code>data/player_archetypes.csv</code> and cluster summaries to <code>data/clusters/</code>.</li>
    </ol>

    <h4 class="font-semibold text-lg mt-4 mb-2">How K-Means Works</h4>
    <p style="line-height:1.25em;">
      K-Means starts by placing <strong>k random centroids</strong> in the feature space. Each player is assigned to the cluster whose centroid is closest to them (based on Euclidean distance). The centroids are then recalculated as the mean of all players in that cluster. This assign-and-update process repeats until the clusters stabilize—meaning no player changes groups.
    </p>
    <p style="line-height:1.25em;">
      The result is a set of stable, data-driven archetypes representing hitters who swing, make contact, and generate batted-ball profiles in similar ways.
    </p>

    <h4 class="font-semibold text-lg mt-4 mb-2">Reproducibility</h4>
    <ul class="list-disc ml-6 space-y-1">
      <li>Set <code>random_state</code> in <code>KMeans</code> for deterministic results.</li>
      <li>Persist the PCA model and scaler metadata to apply the same transformations to future data.</li>
    </ul>

    <hr class="my-4 border-gray-700">

    <h3 class="font-bold text-xl mt-6 mb-2">4. Evaluation &amp; Diagnostics</h3>
    <p style="line-height:1.25em;">
      Because clustering is unsupervised, the goal isn’t prediction accuracy but interpretability and visual coherence.
    </p>
    <ul class="list-disc ml-6 space-y-1">
      <li><strong>Silhouette Score:</strong> how well each player fits within its cluster.</li>
      <li><strong>Davies–Bouldin Index:</strong> measures separation between clusters.</li>
      <li><strong>Centroid heatmaps:</strong> display standardized feature values for each cluster to show what differentiates them.</li>
      <li><strong>PCA scatter plots:</strong> project players in 2D to visualize cluster separation.</li>
      <li><strong>Representative players:</strong> nearest neighbors to each centroid used to label archetypes (e.g., “Line-Drive Contact” or “Pull-Power Barrelers”).</li>
    </ul>

    <hr class="my-4 border-gray-700">

    <h3 class="font-bold text-xl mt-6 mb-2">5. Project File Map</h3>
    <table class="min-w-full text-sm border border-gray-700 mb-4">
      <thead>
        <tr class="bg-gray-800">
          <th class="px-4 py-2 text-left font-semibold">File / Directory</th>
          <th class="px-4 py-2 text-left font-semibold">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr class="bg-gray-900"><td class="px-4 py-2"><code>app.py</code></td><td class="px-4 py-2">Streamlit interface with cluster visualization and player search</td></tr>
        <tr class="bg-gray-800"><td class="px-4 py-2"><code>data/player_archetypes.csv</code></td><td class="px-4 py-2">Main per-player dataset with cluster labels</td></tr>
        <tr class="bg-gray-900"><td class="px-4 py-2"><code>data/clusters/</code></td><td class="px-4 py-2">Per-cluster exports and summaries</td></tr>
        <tr class="bg-gray-800"><td class="px-4 py-2"><code>scripts/cluster_archetypes.py</code></td><td class="px-4 py-2">Main clustering and preprocessing logic</td></tr>
        <tr class="bg-gray-900"><td class="px-4 py-2"><code>scripts/add_player_names.py</code></td><td class="px-4 py-2">Adds readable player names from ID mapping</td></tr>
        <tr class="bg-gray-800"><td class="px-4 py-2"><code>notebooks/</code></td><td class="px-4 py-2">Exploratory and diagnostic notebooks</td></tr>
        <tr class="bg-gray-900"><td class="px-4 py-2"><code>utils/</code></td><td class="px-4 py-2">Helper modules for plotting and UI components</td></tr>
      </tbody>
    </table>

    <hr class="my-4 border-gray-700">

    <h3 class="font-bold text-xl mt-6 mb-2">6. Future Directions</h3>
    <ul class="list-disc ml-6 space-y-1">
      <li>Extend to supervised models predicting next-season outcomes (e.g., wOBA, HR%).</li>
      <li>Add temporal and zone-specific features to refine cluster resolution.</li>
      <li>Deploy a backend API for assigning new players to existing clusters.</li>
      <li>Implement unit tests to ensure consistent preprocessing and circular transformations.</li>
    </ul>

    <hr class="my-4 border-gray-700">

    <h3 class="font-bold text-xl mt-6 mb-2">7. Design Notes</h3>
    <ul class="list-disc ml-6 space-y-1">
      <li>Circular variables are expanded before PCA to eliminate angle discontinuities.</li>
      <li>Random seeds are fixed for reproducible clustering.</li>
      <li>Cluster exports enable downstream modeling and longitudinal tracking.</li>
      <li>The Streamlit app uses modular components (<code>utils/</code>) for maintainability.</li>
    </ul>

      </section>
    <footer class="site-footer">
      <div class="container">
        <p class="muted">© 2025 Christopher Hsu</p>
      </div>
    </footer>
  </body>
</html>